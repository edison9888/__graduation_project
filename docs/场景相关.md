场景相关
=======

## 基本说明 ##
**重大修改！**<br>
场景将分为两种，一种是战斗场景MCBattleFieldScene，另一种是通常的场景MCGameScene。两者都继承自MCScene。
所以场景包的格式也会分为两种。

## 包对象 ##
- id *场景ID*
- type *场景类型，1为通常场景，2为战斗场景*
- objects *场景出现的对象*
- background *tmx地图和背景音乐*
- scenes *与当前场景相连的场景*
- triggers *当前场景的触发器*

### id ###
符合规格4位字符的字符串，例如：M024

### objects ###
根据type属性的值的不同，意义不同。若为**战斗场景**，则*场景中出现的敌人，字典类型，以敌人的ID为键*，若为**一般场景**，则*场景中出现的NPC，字典类型，以NPC的ID为键*。<br>
人物都是不会走的，而怪物是随机走动的没有范围限定。<br>
以下为对象属性列表：

- requirement *出现条件，值为一个Flag的ID数组*
- x *地图中的x坐标*
- y *地图中的y坐标*

### background ###
- tmx *tmx地图的路径*
- sound *当前场景的背景音乐*

### scenes ###
一个字典，键为tmx地图中的场景标示符，值为场景ID

### triggers ###
一个字典，键为当前场景中的触发器的ID，值为lua脚本文件的路径

## 场景切换 ##
0. 提交场景切换请求
1. 运行场景切换脚本
    0. 检测是否已经接收任务
        0. 已经接受任务的情况
            0. 检测请求的场景的ID，是否属于任务地图
                0. 若如属于任务地图，则任务管理器开始任务
        1. 已经开始任务的情况
            0. 若请求的场景并非任务地图，则提示是否放弃任务
            1. 若请求的场景为任务地图，则直接加载地图
        2. 没有接受任务的情况
            0. 直接加载地图，不做什么处理
    1. 显示加载界面
    1. 加载场景
    2. 撤销加载界面
    3. 执行切换场景操作
2. 
3. 

